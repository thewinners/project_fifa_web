<?phpnamespace App;require_once (__DIR__ . "/../DatabaseConnector.php");require_once (__DIR__ . "/../teams/TeamsManager.php");function showLadder(){    $show = false;    $dbc = Connect();    $sql = "SELECT * FROM `tbl_matches` WHERE played = 'F'";    $gamesNotPlayed = $dbc->query($sql)->rowCount();    if ($gamesNotPlayed == 0)    {        $show = true;    }    return $show;}function fillLadder(){    $sql = "SELECT * FROM `tbl_matches` WHERE `id` = 10000";    $rowcound = Connect()->query($sql)->rowCount();    if ($rowcound == 0)    {        $dbc = Connect();        $sql = "SELECT `id`, `name`,`points` FROM `tbl_teams` WHERE `poule_id` = 1 ORDER BY `points` LIMIT 2";        $pool1 = $dbc->query($sql)->fetchAll(\PDO::FETCH_ASSOC);        $sql = "SELECT `id`, `name`,`points` FROM `tbl_teams` WHERE `poule_id` = 2 ORDER BY `points` LIMIT 2";        $pool2 = $dbc->query($sql)->fetchAll(\PDO::FETCH_ASSOC);        $sql = "SELECT `id`, `name`,`points` FROM `tbl_teams` WHERE `poule_id` = 3 ORDER BY `points` LIMIT 2";        $pool3 = $dbc->query($sql)->fetchAll(\PDO::FETCH_ASSOC);        $sql = "SELECT `id`, `name`,`points` FROM `tbl_teams` WHERE `poule_id` = 4 ORDER BY `points` LIMIT 2";        $pool4 = $dbc->query($sql)->fetchAll(\PDO::FETCH_ASSOC);        if ($pool1 != null && $pool2 != null && $pool3 != null && $pool4 != null)        {            $pool = array_merge($pool1, $pool2, $pool3, $pool4);            foreach ($pool as $key => $row)            {                $points[$key] = $row['points'];            }            array_multisort($points, SORT_DESC, $pool);            /*             * 1 tegen nummer 8             *             * 2 tegen nummer 7             *             * 3 tegen nummer 6             *             * 4 tegen nummer 5             * */            $games = array            (                "game1" => array("team1" => $pool[0]['name'], "team2" => $pool[7]['name']),                "game2" => array("team1" => $pool[1]['name'], "team2" => $pool[6]['name']),                "game3" => array("team1" => $pool[2]['name'], "team2" => $pool[5]['name']),                "game4" => array("team1" => $pool[3]['name'], "team2" => $pool[4]['name'])            );            $sql = "INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10000,".$pool[0]['id'].",".$pool[7]['id'].");                    INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10001,".$pool[1]['id'].",".$pool[6]['id'].");                    INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10002,".$pool[2]['id'].",".$pool[5]['id'].");                    INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10003,".$pool[3]['id'].",".$pool[4]['id'].");";            $dbc->query($sql);            return $games;        }    }    else    {        $games = 0;        $dbc = Connect();        $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10000;";        $rusult = $dbc->query($sql)->fetchAll();        $count = 0;        foreach ($rusult as $result)        {            if ($result['played'] == "T")            {                $count++;            }        }        if ($count >= 4)        {            $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10005;";            $rusult2 = $dbc->query($sql)->fetchAll();            $count = 0;            foreach ($rusult2 as $result)            {                if ($result['played'] == "T")                {                    $count++;                }            }            if ($count >= 2)            {                $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10004 && `id` <= 10005;";                $final = $dbc->query($sql)->fetchAll();                $temp_team_a = "";                $temp_team_b = "";                $countround = 0;                foreach ($final as $list)                {                    if ($team["score_team_a"] > $team["score_team_b"])                    {                        if ($countround == 0)                        {                            $temp_team_a = $team["team_id_a"];                        }                        else                        {                            $temp_team_b = $team["team_id_a"];                        }                    }                    elseif ($team["score_team_a"] < $team["score_team_b"])                    {                        if ($countround == 0)                        {                            $temp_team_a = $team["team_id_b"];                        }                        else                        {                            $temp_team_b = $team["team_id_b"];                        }                    }                    else                    {                        if ($countround == 0)                        {                            $temp_team_a = "??";                        }                        else                        {                            $temp_team_b = "??";                        }                    }                    $countround++;                }                $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10004;";                $rusult2 = $dbc->query($sql)->fetchAll();                $games = array                (                    "game1" => array("team1" => fetchTeam($rusult[0]["team_id_a"]),"team2" => fetchTeam($rusult[0]["team_id_b"])),                    "game2" => array("team1" => fetchTeam($rusult[1]["team_id_a"]),"team2" => fetchTeam($rusult[1]["team_id_b"])),                    "game3" => array("team1" => fetchTeam($rusult[2]["team_id_a"]),"team2" => fetchTeam($rusult[2]["team_id_b"])),                    "game4" => array("team1" => fetchTeam($rusult[3]["team_id_a"]),"team2" => fetchTeam($rusult[3]["team_id_b"])),                    "game5" => array("team1" => fetchTeam($rusult2[0]["team_id_a"]), "team2" => fetchTeam($rusult2[0]["team_id_b"])),                    "game6" => array("team1" => fetchTeam($rusult2[1]["team_id_a"]), "team2" => fetchTeam($rusult2[1]["team_id_b"])),                    "game7" => array("team1" => '$temp_team_a', "team2" => '$temp_team_b')                );            }            else            {                $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10000 && `id` <= 10003;";                $teams = $dbc->query($sql)->fetchAll();                $temp_team_a = "";                $temp_team_b = "";                $countround = 0;                $countround2 = 0;                foreach ($teams as $team)                {                    if ($countround == 2)                    {                        if ($countround2 == 0)                        {                            $sql = "INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10004,'$temp_team_a','$temp_team_b');";                        }                        else                        {                            $sql = "INSERT INTO `tbl_matches`(`id`, `team_id_a`, `team_id_b`) VALUES (10005,'$temp_team_a','$temp_team_b');";                        }                        $dbc->query($sql);                        $countround = 0;                        $countround2++;                    }                    if ($team["score_team_a"] > $team["score_team_b"])                    {                        if ($countround == 0)                        {                        $temp_team_a = $team["team_id_a"];                        }                        else                        {                            $temp_team_b = $team["team_id_a"];                        }                    }                    elseif ($team["score_team_a"] < $team["score_team_b"])                    {                        if ($countround == 0)                        {                            $temp_team_a = $team["team_id_b"];                        }                        else                        {                            $temp_team_b = $team["team_id_b"];                        }                    }                    else                    {                        if ($countround == 0)                        {                            $temp_team_a = "??";                        }                        else                        {                            $temp_team_b = "??";                        }                    }                    $countround++;                }                $sql = "SELECT * FROM `tbl_matches` WHERE `id` >= 10004;";                $rusult2 = $dbc->query($sql)->fetchAll();                $games = array                (                    "game1" => array("team1" => fetchTeam2($rusult[0]["team_id_a"]),"team2" => fetchTeam2($rusult[0]["team_id_b"])),                    "game2" => array("team1" => fetchTeam2($rusult[1]["team_id_a"]),"team2" => fetchTeam2($rusult[1]["team_id_b"])),                    "game3" => array("team1" => fetchTeam2($rusult[2]["team_id_a"]),"team2" => fetchTeam2($rusult[2]["team_id_b"])),                    "game4" => array("team1" => fetchTeam2($rusult[3]["team_id_a"]),"team2" => fetchTeam2($rusult[3]["team_id_b"])),                    "game5" => array("team1" => fetchTeam2($rusult2[0]["team_id_a"]), "team2" => fetchTeam2($rusult2[0]["team_id_b"])),                    "game6" => array("team1" => fetchTeam2($rusult2[1]["team_id_a"]), "team2" => fetchTeam2($rusult2[1]["team_id_b"])),                    "game7" => array("team1" => "??", "team2" => "??")                );            }        }        else        {            $games = array            (                "game1" => array("team1" => fetchTeam2($rusult[0]["team_id_a"]),"team2" => fetchTeam2($rusult[0]["team_id_b"])),                "game2" => array("team1" => fetchTeam2($rusult[1]["team_id_a"]),"team2" => fetchTeam2($rusult[1]["team_id_b"])),                "game3" => array("team1" => fetchTeam2($rusult[2]["team_id_a"]),"team2" => fetchTeam2($rusult[2]["team_id_b"])),                "game4" => array("team1" => fetchTeam2($rusult[3]["team_id_a"]),"team2" => fetchTeam2($rusult[3]["team_id_b"])),                "game5" => array("team1" => "??", "team2" => "??"),                "game6" => array("team1" => "??", "team2" => "??"),                "game7" => array("team1" => "??", "team2" => "??")            );        }        return $games;    }    return 0;}